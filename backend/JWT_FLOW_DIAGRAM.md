# JWT Authentication Flow - Visual Guide

## ğŸ” Complete Authentication & Authorization Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          REGISTRATION FLOW                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ğŸ“± Mobile App              ğŸ–¥ï¸  Backend Server           ğŸ’¾ MongoDB
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”€â”€â”€â”€â”€â”€â”€â”€
        â”‚                              â”‚                         â”‚
        â”‚  POST /api/auth/signup      â”‚                         â”‚
        â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚                         â”‚
        â”‚  {                           â”‚                         â”‚
        â”‚    username: "john",         â”‚                         â”‚
        â”‚    email: "john@mail.com",   â”‚                         â”‚
        â”‚    password: "pass123",      â”‚  User.create()         â”‚
        â”‚    fullName: "John Doe"      â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>   â”‚
        â”‚  }                           â”‚                         â”‚
        â”‚                              â”‚  Hash password         â”‚
        â”‚                              â”‚  with bcrypt           â”‚
        â”‚                              â”‚                         â”‚
        â”‚                              â”‚  Save user             â”‚
        â”‚                              â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>   â”‚
        â”‚                              â”‚                         â”‚
        â”‚                              â”‚  User saved âœ“          â”‚
        â”‚                              â”‚  <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
        â”‚                              â”‚                         â”‚
        â”‚                              â”‚  generateToken()       â”‚
        â”‚                              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
        â”‚                              â”‚  â”‚ jwt.sign({  â”‚       â”‚
        â”‚                              â”‚  â”‚   id: user._id,     â”‚
        â”‚                              â”‚  â”‚ }, JWT_SECRET, {    â”‚
        â”‚                              â”‚  â”‚   expiresIn: '7d'   â”‚
        â”‚                              â”‚  â”‚ })          â”‚       â”‚
        â”‚                              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
        â”‚                              â”‚                         â”‚
        â”‚  Response:                   â”‚                         â”‚
        â”‚  <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚                         â”‚
        â”‚  {                           â”‚                         â”‚
        â”‚    success: true,            â”‚                         â”‚
        â”‚    data: {                   â”‚                         â”‚
        â”‚      user: {...},            â”‚                         â”‚
        â”‚      token: "eyJhbG..."      â”‚                         â”‚
        â”‚    }                         â”‚                         â”‚
        â”‚  }                           â”‚                         â”‚
        â”‚                              â”‚                         â”‚
        â”‚  Store in AsyncStorage       â”‚                         â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚                         â”‚
        â”‚  â”‚ userToken:      â”‚         â”‚                         â”‚
        â”‚  â”‚ "eyJhbG..."     â”‚         â”‚                         â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚                         â”‚
        â”‚                              â”‚                         â”‚


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            LOGIN FLOW                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ğŸ“± Mobile App              ğŸ–¥ï¸  Backend Server           ğŸ’¾ MongoDB
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”€â”€â”€â”€â”€â”€â”€â”€
        â”‚                              â”‚                         â”‚
        â”‚  POST /api/auth/login       â”‚                         â”‚
        â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚                         â”‚
        â”‚  {                           â”‚                         â”‚
        â”‚    email: "john@mail.com",   â”‚  User.findOne()        â”‚
        â”‚    password: "pass123"       â”‚  .select('+password')  â”‚
        â”‚  }                           â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>   â”‚
        â”‚                              â”‚                         â”‚
        â”‚                              â”‚  User found            â”‚
        â”‚                              â”‚  <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
        â”‚                              â”‚                         â”‚
        â”‚                              â”‚  user.matchPassword()  â”‚
        â”‚                              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
        â”‚                              â”‚  â”‚ bcrypt.compare(     â”‚
        â”‚                              â”‚  â”‚   enteredPassword,  â”‚
        â”‚                              â”‚  â”‚   hashedPassword    â”‚
        â”‚                              â”‚  â”‚ )            â”‚      â”‚
        â”‚                              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
        â”‚                              â”‚                         â”‚
        â”‚                              â”‚  Password matches âœ“    â”‚
        â”‚                              â”‚                         â”‚
        â”‚                              â”‚  generateToken()       â”‚
        â”‚                              â”‚  jwt.sign(...)         â”‚
        â”‚                              â”‚                         â”‚
        â”‚  Response:                   â”‚                         â”‚
        â”‚  <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚                         â”‚
        â”‚  {                           â”‚                         â”‚
        â”‚    success: true,            â”‚                         â”‚
        â”‚    data: {                   â”‚                         â”‚
        â”‚      user: {...},            â”‚                         â”‚
        â”‚      token: "eyJhbG..."      â”‚                         â”‚
        â”‚    }                         â”‚                         â”‚
        â”‚  }                           â”‚                         â”‚
        â”‚                              â”‚                         â”‚


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ACCESSING PROTECTED ROUTE                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ğŸ“± Mobile App              ğŸ–¥ï¸  Backend Server           ğŸ’¾ MongoDB
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”€â”€â”€â”€â”€â”€â”€â”€
        â”‚                              â”‚                         â”‚
        â”‚  GET /api/posts              â”‚                         â”‚
        â”‚  Authorization: Bearer token â”‚                         â”‚
        â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚                         â”‚
        â”‚                              â”‚                         â”‚
        â”‚                              â”‚  ğŸ›¡ï¸ auth.js Middleware â”‚
        â”‚                              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚                              â”‚  â”‚ 1. Extract token â”‚  â”‚
        â”‚                              â”‚  â”‚    from header   â”‚  â”‚
        â”‚                              â”‚  â”‚                  â”‚  â”‚
        â”‚                              â”‚  â”‚ 2. Verify token: â”‚  â”‚
        â”‚                              â”‚  â”‚    jwt.verify(   â”‚  â”‚
        â”‚                              â”‚  â”‚      token,      â”‚  â”‚
        â”‚                              â”‚  â”‚      JWT_SECRET  â”‚  â”‚
        â”‚                              â”‚  â”‚    )             â”‚  â”‚
        â”‚                              â”‚  â”‚                  â”‚  â”‚
        â”‚                              â”‚  â”‚ 3. Decoded:      â”‚  â”‚
        â”‚                              â”‚  â”‚    { id: "..." } â”‚  â”‚
        â”‚                              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â”‚                              â”‚                         â”‚
        â”‚                              â”‚  User.findById(id)     â”‚
        â”‚                              â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>   â”‚
        â”‚                              â”‚                         â”‚
        â”‚                              â”‚  User data             â”‚
        â”‚                              â”‚  <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
        â”‚                              â”‚                         â”‚
        â”‚                              â”‚  req.user = user       â”‚
        â”‚                              â”‚  next() â¡ï¸ controller  â”‚
        â”‚                              â”‚                         â”‚
        â”‚                              â”‚  postController.js     â”‚
        â”‚                              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚                              â”‚  â”‚ Access req.user  â”‚  â”‚
        â”‚                              â”‚  â”‚ Get posts        â”‚  â”‚
        â”‚                              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â”‚                              â”‚                         â”‚
        â”‚  Response:                   â”‚                         â”‚
        â”‚  <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚                         â”‚
        â”‚  {                           â”‚                         â”‚
        â”‚    success: true,            â”‚                         â”‚
        â”‚    data: [                   â”‚                         â”‚
        â”‚      { post1 },              â”‚                         â”‚
        â”‚      { post2 }               â”‚                         â”‚
        â”‚    ]                         â”‚                         â”‚
        â”‚  }                           â”‚                         â”‚
        â”‚                              â”‚                         â”‚


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     TOKEN EXPIRATION SCENARIO                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ğŸ“± Mobile App              ğŸ–¥ï¸  Backend Server
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        â”‚                              â”‚
        â”‚  GET /api/posts              â”‚
        â”‚  Authorization: Bearer token â”‚
        â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚
        â”‚                              â”‚
        â”‚                              â”‚  ğŸ›¡ï¸ auth.js Middleware
        â”‚                              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                              â”‚  â”‚ jwt.verify()     â”‚
        â”‚                              â”‚  â”‚ throws Error:    â”‚
        â”‚                              â”‚  â”‚ "jwt expired"    â”‚
        â”‚                              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                              â”‚
        â”‚  401 Unauthorized            â”‚
        â”‚  <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
        â”‚  {                           â”‚
        â”‚    success: false,           â”‚
        â”‚    message: "Not authorized, â”‚
        â”‚              token failed"   â”‚
        â”‚  }                           â”‚
        â”‚                              â”‚
        â”‚  Redirect to login screen    â”‚
        â”‚  Clear AsyncStorage          â”‚
        â”‚                              â”‚


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     JWT TOKEN STRUCTURE                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Full Token:
    eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY1N2FiYzEyMzQ1Njc4OWFiY2RlZiIsImlhdCI6MTcwNjE4NDAwMCwiZXhwIjoxNzA2Nzg4ODAwfQ.K7xTJdM_9q3VnN8pZ2RkYmFzZTY0LXNpZ25hdHVyZQ

    Split by dots (.):
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚          HEADER (Base64)            â”‚
    â”‚  eyJhbGciOiJIUzI1NiIsInR5cCI...   â”‚
    â”‚                                     â”‚
    â”‚  Decoded:                           â”‚
    â”‚  {                                  â”‚
    â”‚    "alg": "HS256",                  â”‚
    â”‚    "typ": "JWT"                     â”‚
    â”‚  }                                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    .
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         PAYLOAD (Base64)            â”‚
    â”‚  eyJpZCI6IjY1N2FiYzEyMzQ1Njc4...   â”‚
    â”‚                                     â”‚
    â”‚  Decoded:                           â”‚
    â”‚  {                                  â”‚
    â”‚    "id": "657abc123456789abcdef",   â”‚
    â”‚    "iat": 1706184000,               â”‚
    â”‚    "exp": 1706788800                â”‚
    â”‚  }                                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    .
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         SIGNATURE (Encrypted)       â”‚
    â”‚  K7xTJdM_9q3VnN8pZ2RkYmFzZTY0... â”‚
    â”‚                                     â”‚
    â”‚  Generated using:                   â”‚
    â”‚  HMACSHA256(                        â”‚
    â”‚    header + "." + payload,          â”‚
    â”‚    JWT_SECRET                       â”‚
    â”‚  )                                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     REQUEST HEADERS FORMAT                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    âœ… CORRECT:
    Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
                   ^^^^^^ ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                   Space   Token (no spaces)

    âŒ WRONG:
    Authorization: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...  (missing "Bearer")
    Authorization: BearereyJhbGciOiJIUzI1NiIsInR5cCI6...   (no space)
    bearer: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...      (lowercase, wrong key)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     FILE STRUCTURE OVERVIEW                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    backend/
    â”‚
    â”œâ”€â”€ .env                          ğŸ”’ JWT_SECRET stored here
    â”‚   â”œâ”€â”€ JWT_SECRET=abc123...
    â”‚   â””â”€â”€ JWT_EXPIRE=7d
    â”‚
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ middleware/
    â”‚   â”‚   â””â”€â”€ auth.js              ğŸ›¡ï¸ Verifies JWT token
    â”‚   â”‚       â””â”€â”€ protect()           Checks Authorization header
    â”‚   â”‚           â””â”€â”€ jwt.verify()    Verifies signature
    â”‚   â”‚               â””â”€â”€ User.findById()
    â”‚   â”‚
    â”‚   â”œâ”€â”€ controllers/
    â”‚   â”‚   â””â”€â”€ authController.js    ğŸ”‘ Generates JWT token
    â”‚   â”‚       â”œâ”€â”€ signup()            Creates user + token
    â”‚   â”‚       â”œâ”€â”€ login()             Verifies + token
    â”‚   â”‚       â””â”€â”€ generateToken()     jwt.sign()
    â”‚   â”‚
    â”‚   â”œâ”€â”€ models/
    â”‚   â”‚   â””â”€â”€ User.js              ğŸ‘¤ User schema
    â”‚   â”‚       â”œâ”€â”€ password hashing    bcrypt
    â”‚   â”‚       â””â”€â”€ matchPassword()     Compare passwords
    â”‚   â”‚
    â”‚   â””â”€â”€ routes/
    â”‚       â”œâ”€â”€ auth.js              ğŸšª Public routes
    â”‚       â”‚   â”œâ”€â”€ POST /signup        âœ… No token needed
    â”‚       â”‚   â””â”€â”€ POST /login         âœ… No token needed
    â”‚       â”‚
    â”‚       â””â”€â”€ posts.js             ğŸ”’ Protected routes
    â”‚           â”œâ”€â”€ GET /posts          âš ï¸ Token required
    â”‚           â””â”€â”€ POST /posts         âš ï¸ Token required
    â”‚
    mobile/
    â”‚
    â”œâ”€â”€ context/
    â”‚   â””â”€â”€ AuthContext.js           ğŸ“± Manages auth state
    â”‚       â”œâ”€â”€ Login function          Calls API
    â”‚       â”œâ”€â”€ Store token             AsyncStorage
    â”‚       â””â”€â”€ Logout function         Clear token
    â”‚
    â””â”€â”€ services/
        â””â”€â”€ api.js                   ğŸŒ HTTP client
            â””â”€â”€ interceptor             Adds Authorization header


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SECURITY FLOW                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    User Password â†’ bcrypt.hash() â†’ Database (hashed)
                                        â†“
                    Never stored in plaintext
                    Never returned in API response

    User Login â†’ bcrypt.compare() â†’ Match? â†’ Generate JWT
                 (entered, hashed)    âœ“
                                             â†“
                                    JWT signed with JWT_SECRET
                                             â†“
                                    Token sent to client
                                             â†“
                                    Client stores securely
                                             â†“
                                    Client sends with requests
                                             â†“
                                    Server verifies signature
                                             â†“
                                    If valid â†’ Access granted
                                    If invalid â†’ 401 Error


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     TIMELINE VIEW                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Day 0  â”‚  User registers/logs in
           â”‚  â”œâ”€ Token generated (expires in 7 days)
           â”‚  â””â”€ Token: eyJhbG... (iat: Day 0, exp: Day 7)
           â”‚
    Day 1  â”‚  User makes requests
           â”‚  â””â”€ Token valid âœ…
           â”‚
    Day 2  â”‚  User makes requests
           â”‚  â””â”€ Token valid âœ…
           â”‚
    Day 3  â”‚  User makes requests
           â”‚  â””â”€ Token valid âœ…
           â”‚
    Day 4  â”‚  User makes requests
           â”‚  â””â”€ Token valid âœ…
           â”‚
    Day 5  â”‚  User makes requests
           â”‚  â””â”€ Token valid âœ…
           â”‚
    Day 6  â”‚  User makes requests
           â”‚  â””â”€ Token valid âœ…
           â”‚
    Day 7  â”‚  Token expires! â°
           â”‚  â””â”€ jwt.verify() throws "jwt expired"
           â”‚      â”œâ”€ Server returns 401
           â”‚      â”œâ”€ User redirected to login
           â”‚      â””â”€ Must login again for new token
```

---

## ğŸ¯ Key Takeaways

1. **JWT = Header + Payload + Signature**
2. **Signature prevents tampering** (uses JWT_SECRET)
3. **Tokens are stateless** (no server-side storage)
4. **Middleware protects routes** (verify before controller)
5. **Mobile app stores token** (AsyncStorage)
6. **Token sent in Authorization header** (Bearer format)
7. **Token expires** (default 7 days, then re-login)

---

For detailed explanations, see `JWT_GUIDE.md`!
